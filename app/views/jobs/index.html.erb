
<style>

#job-index-container {
  margin: auto;
  width: 85%;
  margin-top: 55px;
}

#job-index-container table {
    margin: auto;
    width: 100%;
    border: solid 1px;
    border-color: #cecece;
    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2), 0 1px 3px 0 rgba(0,0,0,0.19);
}

#job-index-container th {
  text-transform: uppercase;
}

#job-index-container td, #job-index-container th {
    border: 1px solid #545353;
    text-align: left;
    padding: 8px;
}

#job-index-container tr:nth-child(even) {
    background-color: #dddddd;
}

tr.applied td:nth-child(-n+2) {
  background: #daf2e2;
}


@media only screen and (max-width: 1100px) {
  #job-index-container th.mid-no-show {
    display: none;
  }

  #job-index-container td.mid-no-show {
    display: none;
  }
}

@media only screen and (max-width: 850px) {
  #job-index-container th.mobile-no-show {
    display: none;
  }

  #job-index-container td.mobile-no-show {
    display: none;
  }
}



</style>




<div id='job-index-container'>

  <% if @jobs.length > 0 %>

    <h1>POSITIONS</h1>
    <button><%= link_to "Add New Position", new_user_job_path %></button><br><br>

      <table>
        <tr>
          <th>Company</th>
          <th>Position</th>
          <th class='mobile-no-show'>Date Posted</th>
          <th class='mobile-no-show'>Close Date</th>
          <th class='mobile-no-show mid-no-show'>Applied</th>
          <th class='mobile-no-show mid-no-show'>Upcoming Tasks</th>
          <th>Next Task Due</th>
          <th class='mobile-no-show'></th>
          <th class='mobile-no-show'></th>
        </tr>
        <% @jobs.each do |job| %>
      	  <tr class="<%= job.applied == true ? "applied" : "not-applied" %>" >
      	    <td><%= link_to job.company, user_job_path(job.user, job) %></td>
      	    <td><%= link_to job.position, user_job_path(job.user, job) %></td>
      	    <td class='mobile-no-show'><%= format_date(job.date_posted) %></td>
            <td class='mobile-no-show'>add this to db</td>

            <td class='mobile-no-show mid-no-show applied-<%= job.applied.to_s %>'><%= job.applied.to_s == 'true' %></td>


            <td class='mobile-no-show mid-no-show'><%= job.tasks.length %> upcoming</td> 

            <% if job.tasks.length > 0 %> 
              <td><%= job.tasks.first %></td>
            <% else %>
              <td>na</td>
            <% end %>



      	    <td class='mobile-no-show'><%= link_to "Edit", edit_user_job_path(job.user, job) %></td>
      	    <td class='mobile-no-show'><%= link_to "Delete", user_job_path(job.user, job), :method => :delete %></td>
      	  </tr>
        <% end %>
      </table> <!-- close table -->

  <% else %>

    <div id='top'>
      <h1>YOU HAVE NO SAVED POSITIONS</h1>
      <button><%= link_to "Add New Position", new_user_job_path %></button><br><br>
    </div>

  <% end %>


</div> <!--close page-->



